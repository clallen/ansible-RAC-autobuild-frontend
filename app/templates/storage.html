{% extends "base.html" %}
{% block content %}
<h1>Storage Configuration</h1>
Cluster Name: {{session.clname}}

<form action="/storage" method="POST" name="Storage">
<div id="defblocks">
{% if session.blocks|length > 0 %}
    Defined Storage Blocks
    {% for blockname in session.blocks.iterkeys() %}
        <table>
        <tr>
        <th>Name</th>
        <td>{{blockname}}</td>
        <th>Pool</th>
        <td>{{session.blocks[blockname]["pool"]}}</td>
        <th>Ports</th>
        <td>{{session.blocks[blockname]["ports"]}}</td>
        <th>Begin LDEV</th>
        <td>{{session.blocks[blockname]["begin"]}}</td>
        <th>End LDEV</th>
        <td>{{session.blocks[blockname]["end"]}}</td>
        <th>Size (GB)</th>
        <td>{{session.blocks[blockname]["size"]}}</td>
        <th>Chassis</th>
        <td>{{session.blocks[blockname]["chassis"]}}</td>
        </tr>
        </table>
        <input type="submit" name="rmbtn" value="Remove {{blockname}}">
    {% endfor %}
{% else %}
    No Storage Blocks currently defined
{% endif %}
</div>
<div id="fields">
Name: {{form.name(size=15)}}
{% if form.name.errors|length > 0 %}
    <p id="validerr">{{form.name.errors[0]}}</p>
{% endif %}
<br>Pool: {{form.pool(size=2)}}
{% if form.pool.errors|length > 0 %}
    <p id="validerr">{{form.pool.errors[0]}}</p>
{% endif %}
<br>Ports (comma-separated): {{form.ports(size=10)}}
{% if form.ports.errors|length > 0 %}
    <p id="validerr">{{form.ports.errors[0]}}</p>
{% endif %}
<br>Begin LDEV: {{form.begin(size=5)}}
{% if form.begin.errors|length > 0 %}
    <p id="validerr">{{form.begin.errors[0]}}</p>
{% endif %}
<br>End LDEV: {{form.end(size=5)}}
{% if form.end.errors|length > 0 %}
    <p id="validerr">{{form.end.errors[0]}}</p>
{% endif %}
<br>Size in GB: {{form.size(size=4)}}
{% if form.size.errors|length > 0 %}
    <p id="validerr">{{form.size.errors[0]}}</p>
{% endif %}
<br>Chassis (comma-separated): {{form.chassis(size=20)}}
{% if form.chassis.errors|length > 0 %}
    <p id="validerr">{{form.chassis.errors[0]}}</p>
{% endif %}
</div>
{{form.backbtn}}
{{form.addbtn}}
{{form.nextbtn}}
</form>
{% endblock %}
